---
export interface Props {
  lang: 'ar' | 'en';
}

const { lang } = Astro.props;

const services = {
  ar: [
    { name: 'تنفيذ اودو ERP الكامل', href: '/services/odoo-implementation', icon: 'implementation' },
    { name: 'تحليل الاعمال وجمع المتطلبات', href: '/services/business-analysis', icon: 'analysis' },
    { name: 'تنفيذ اودو وتكوين الوحدات', href: '/services/module-configuration', icon: 'modules' },
    { name: 'التخصيص والتطوير', href: '/services/customization-development', icon: 'development' },
    { name: 'نقل البيانات', href: '/services/data-migration', icon: 'migration' },
    { name: 'الاستضافة والبنية التحتية', href: '/services/hosting-infrastructure', icon: 'hosting' },
    { name: 'التدريب والتوثيق', href: '/services/training-documentation', icon: 'training' },
    { name: 'الدعم والصيانة', href: '/services/support-maintenance', icon: 'support' },
    { name: 'الاستشارات والتحسين', href: '/services/consultancy-optimization', icon: 'consulting' },
    { name: 'تطوير المواقع والتجارة الالكترونية', href: '/services/website-ecommerce', icon: 'ecommerce' }
  ],
  en: [
    { name: 'Full Odoo ERP Implementation', href: '/en/services/odoo-implementation', icon: 'implementation' },
    { name: 'Business Analysis & Requirements Gathering', href: '/en/services/business-analysis', icon: 'analysis' },
    { name: 'Odoo Implementation & Module Configuration', href: '/en/services/module-configuration', icon: 'modules' },
    { name: 'Customization & Development', href: '/en/services/customization-development', icon: 'development' },
    { name: 'Data Migration', href: '/en/services/data-migration', icon: 'migration' },
    { name: 'Hosting & Infrastructure', href: '/en/services/hosting-infrastructure', icon: 'hosting' },
    { name: 'Training & Documentation', href: '/en/services/training-documentation', icon: 'training' },
    { name: 'Support & Maintenance', href: '/en/services/support-maintenance', icon: 'support' },
    { name: 'Consultancy & Optimization', href: '/en/services/consultancy-optimization', icon: 'consulting' },
    { name: 'Website & eCommerce Development', href: '/en/services/website-ecommerce', icon: 'ecommerce' }
  ]
};

const getIcon = (iconType: string) => {
  const icons = {
    implementation: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',
    analysis: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>',
    modules: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>',
    development: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>',
    migration: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>',
    hosting: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>',
    training: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>',
    support: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>',
    consulting: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>',
    ecommerce: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l-1 7a2 2 0 01-2 2H8a2 2 0 01-2-2L5 9z"></path>'
  };
  return icons[iconType] || icons.implementation;
};

const currentServices = services[lang];
---

<div class="services-dropdown absolute top-full left-0 rtl:left-auto rtl:right-0 mt-2 w-64 bg-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top scale-95 group-hover:scale-100 z-50">
  <div class="p-4">
    <h3 class="text-sm font-semibold text-dark-900 mb-3">{lang === 'ar' ? 'خدماتنا' : 'Our Services'}</h3>
    <ul class="space-y-2">
      {currentServices.map((service) => (
        <li>
          <a href={service.href} class="flex items-center text-dark-700 hover:text-odoo-purple hover:bg-gray-50 px-3 py-2 rounded-md transition-colors duration-200 text-sm">
            <span class="w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2 flex-shrink-0">
              <svg class="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <Fragment set:html={getIcon(service.icon)} />
              </svg>
            </span>
            <span>{service.name}</span>
          </a>
        </li>
      ))}
    </ul>
  </div>
</div>

<style>
  .services-dropdown {
    min-width: 280px;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  @media (max-width: 768px) {
    .services-dropdown {
      position: static;
      width: 100%;
      box-shadow: none;
      border-top: 1px solid #f3f4f6;
      border-bottom: 1px solid #f3f4f6;
      margin: 0;
      padding: 0.5rem 0;
    }
  }
</style>